
## 性能测试

* 基于v1.2.10版本进行的压测

#### 压测端
* 6 * 40核物理机
* 使用zk作为注册中心
* 压测CamelliaHotKeyMonitorSdk，通过调整线程数和sleep控制qps
* 每次请求都是uuid，1/2/3个namespace
* 其他都是默认配置

#### 服务器
* k8s部署16c32g的pod
* jvm堆设置为16g
* jdk版本jdk_17.0.2
* 配置4条规则，覆盖所有规则匹配类型，但是只有最后一条的match_all能匹配上
* 其他都是默认配置


#### 压测结果
|        压测场景         | 服务器处理QPS | 服务器cpu使用率 |                                说明                                | 
|:-------------------:|:--------:|:---------:|:----------------------------------------------------------------:|
|     1个namespace     |   105w   |    37%    | 有堆积有丢弃，说明服务器caffeine有瓶颈，可以通过配置单namespace下的caffeine实例数来提升性能（默认是1） |
|     2个namespace     |   156w   |    51%    |                             有堆积，无丢弃                              |
|     3个namespace     |   158w   |    57%    |                        无堆积无丢弃，说明sdk出现了瓶颈                         |
| 3个namespace，改成8台压测机 |   207w   |    72%    |                             有堆积，无丢弃                              |
