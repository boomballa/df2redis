########################################
##### ğŸš€ Base Task #####################
########################################
# Optional task name (used for log file prefix, can be overridden via --task-name)
taskName: ""
stateDir: ../out
statusFile: ../out/status.json

########################################
##### ğŸ—„ï¸ Dragonfly Source #############
########################################
source:
  type: dragonfly
  addr: 127.0.0.1:6379       # Replace with your Dragonfly address
  password: ""
  tls: false

########################################
##### ğŸ¯ Redis Target #################
########################################
target:
  type: redis-standalone
  addr: 127.0.0.1:6380
  #  type: redis-cluster
  #  addr: 127.0.0.1:7000
  password: "your_password"
  tls: false

########################################
##### ğŸ“Š Dashboard config ##############
########################################
# Embedded dashboard listen address
# - Specific port (e.g. ":7777"): Tries this port first, falls back to random 20000-30000 if unavailable
# - Auto allocation (":0"): System assigns random available port in range 20000-30000
# - Empty ("") or omitted: Disables dashboard
# Multi-instance safe: If preferred port is busy, automatically selects random port from 20000-30000
dashboard:
  addr: ":7777"                

########################################
##### ğŸ’¾ Checkpoint config #############
########################################
checkpoint:
  enabled: true
  intervalSeconds: 10
  path: ""

########################################
##### ğŸ“ log config ####################
########################################
log:
  dir: "../log"                # Relative to this config directory (e.g. ../log)
  level: "debug"               # debug | info | warn | error
  consoleEnabled: true         # Print highlights to stdout (false = silent)

########################################
##### âš–ï¸ Conflict Policy ##############
########################################
# overwrite | panic | skip
# overwrite: fastest path; incoming keys always replace existing ones without checksâ€”ideal when the target DB can be fully overridden.
# panic: safest; performs an EXISTS check and stops replication immediately if a duplicate key is foundâ€”use for pristine targets where any collision is a hard error.
# skip: middle ground; duplicates are detected but silently skipped so existing target data winsâ€”useful when you know the destination already holds valid values you donâ€™t want to overwrite.
# Heads-up: the skip policy performs an EXISTS check before every write, so it has the heaviest performance overhead and will slow down the migration the most.
conflict:
  policy: "overwrite"          

########################################
##### âš¡ Advanced Tuning ################
########################################
advanced:
  qps: 0                       # Rate limit (0 = unlimited). Set to e.g. 2000 to protect target.
  batchSize: 500               # Number of entries per batch write.

########################################
##### ğŸ› ï¸ Legacy shake placeholders ###
########################################
migrate:
  snapshotPath: ../tmp/placeholder.rdb
  shakeBinary: ../redis-shake-v4